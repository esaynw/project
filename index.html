<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Leaflet Test</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    #map { height: 600px; }
  </style>
</head>
<body>

<h2>Leaflet Test Map (Inline GeoJSON)</h2>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ----------------- SIMPLE TEST MAP ------------------
const map = L.map('map').setView([45.51, -73.56], 12);

L.tileLayer('https://cartodb-basemaps-a.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}.png', {
  maxZoom: 18
}).addTo(map);

// --- Inline sample --- ALWAYS WORKS ---
const sample = {
 "type":"FeatureCollection",
 "features":[
  {
    "type":"Feature",
    "properties":{"id":"Test 1","GRAVITE":"LÃ©ger"},
    "geometry":{"type":"Point","coordinates":[-73.57,45.52]}
  },
  {
    "type":"Feature",
    "properties":{"id":"Test 2","GRAVITE":"Mortel"},
    "geometry":{"type":"Point","coordinates":[-73.55,45.50]}
  }
 ]
};

L.geoJSON(sample, {
  pointToLayer: (f,latlng)=> L.circleMarker(latlng,{
    radius:6,
    fillColor: f.properties.GRAVITE==="Mortel" ? "red" : "yellow",
    color:"#000",
    weight:1,
    fillOpacity:0.9
  }).bindPopup("<b>"+f.properties.id+"</b><br>"+f.properties.GRAVITE)
}).addTo(map);
</script>

</body>
</html>
